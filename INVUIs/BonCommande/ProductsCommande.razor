<div style="max-height: 300px; overflow-y: auto;">
    <div class="btn-add-product" style="display: flex; justify-content: flex-end;">
        <button type="button" class="addproduct-button" @onclick="OpenPopup">
            <i class="bi bi-plus-circle"></i> Add a product
        </button>
    </div>


    <table class="table table-bordered mt-3 text-center">
        <thead class="table-light">
        <tr>
            <th style="width: 3%;">Number</th>
            <th style="width: 40%;">Data</th>
            <th style="width: 4%;">Unit of Measure</th>
            <th style="width: 7%;">Quantity</th>
            <th style="width: 15%;">Unit Price</th>
            <th style="width: 9%;">TVA</th>
            <th style="width: 18%;">Total</th>
            <th style="width: 2%;">Actions</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var product in products)
        {
            <tr>
                <td>@product.Number</td>
                <td>
                    @product.Designation
                    <!--  <textarea>@product.Data</textarea>  -->
                </td>
                <td>@product.UnitMeasure</td>
                <td>@product.Quantity</td>
                <td>@product.UnitPrice</td>
                <td>@product.TVA %</td>
                <td>@product.UnitPrice</td>
                <td>
                    <button type="button" class="deleteproduct-button" @onclick="() => DeleteProduct(product)">
                        <i class="bi bi-trash-fill"></i>
                    </button>
                </td>
            </tr>
        }
        </tbody>
    </table>
</div>


<div class="popup" style="display:@(showPopup ? "flex" : "none")">
    <div class="popup-content">
        <h3>Add Product</h3>
        <br/>
        <div class="form-grid">
            <div class="commend-input">
                <label>Data <span style="color: red">*</span></label>
                <InputTextArea class="form-control valid" @bind-Value="newProduct.Designation"/>
            </div>

            <div class="commend-input">
                <label>Unit of Measure <span style="color: red">*</span></label>
                <InputText class="form-control" @bind-Value="newProduct.UnitMeasure"/>
            </div>
            <div class="commend-input">
                <label>Quantity<span style="color: red">*</span></label>
                <InputNumber class="form-control" @bind-Value="newProduct.Quantity" min=1 />
            </div>
            <div class="commend-input">
                <label>Unit Price <span style="color: red">*</span></label>
                <InputNumber class="form-control" @bind-Value="newProduct.UnitPrice" min=1 />
            </div>
            <div class="commend-input">
                <label>TVA</label>
                <InputSelect class="form-control text-center valid" @bind-Value="newProduct.TVA">
                    <option value="19" selected>19%</option>
                    <option value="0">0%</option>
                    <option value="9">9%</option>
                </InputSelect>
            </div>
        </div>
        <div class="popup-button">
            <button type="button" class="cancel-btn" @onclick="closePopup">Cancel</button>
            <button type="button" @onclick="SaveProduct">Save</button>

        </div>
    </div>
</div>